{"ast":null,"code":"import { orderService } from '../services/order.service.js';\nexport function setMediaLink(mediaLink) {\n  console.log('action mediaLink', mediaLink);\n  return async dispatch => {\n    try {\n      dispatch({\n        type: 'SET_MEDIA_LINK',\n        mediaLink\n      });\n    } catch (err) {\n      console.log('Name Actions: err in loaded Names', err);\n    }\n  };\n}\nexport function setMediaType(mediaName) {\n  console.log('action mediaName', mediaName);\n  return async dispatch => {\n    try {\n      dispatch({\n        type: 'SELECTED_MEDIA_TYPE',\n        mediaName\n      });\n    } catch (err) {\n      console.log('Order Actions: err in set order', err);\n    }\n  };\n}\nexport function setOrderDetails(orderDetails) {\n  console.log('action orderDetails', orderDetails);\n  return async dispatch => {\n    try {\n      dispatch({\n        type: 'SET_ORDER',\n        orderDetails\n      });\n    } catch (err) {\n      console.log('Actions: err in set order', err);\n    }\n  };\n}\nexport function orderCompleted(orderDetails) {\n  return async dispatch => {\n    try {\n      console.log('orderDetails sfsffsff', orderDetails);\n      const orderId = await orderService.saveOrder(orderDetails);\n      console.log('orderId actionnnnn', orderId);\n      const cardComLink = await orderService.charge('testp', 105.2, orderId);\n      const lowProfile = getLowProfileCode(cardComLink); // orderDetails.lowProfileCode = lowProfile\n\n      console.log('orderDetails sfsffsf222222', orderDetails);\n      orderService.updateLowProfile(orderId, lowProfile);\n      dispatch({\n        type: 'SET_CARDCOME_LINK',\n        cardComLink\n      });\n    } catch (err) {\n      console.log('Actions: err in set order', err);\n    }\n  };\n}\nexport function getOrder(orderId) {\n  console.log('action getOrder orderId', orderId);\n  return async dispatch => {\n    try {\n      const selectedOrder = await orderService.getOrderById(orderId);\n      console.log('selectedOrder', selectedOrder);\n      dispatch({\n        type: 'SET_SELECTED_ORDER',\n        selectedOrder\n      });\n    } catch (err) {\n      console.log('Actions: err in set order', err);\n    }\n  };\n} // export function transactionSuccess(lowProfileCode) {\n// console.log('actionnn transactionSuccess');\n//     return async dispatch => {\n//         try {\n//             //check if the transaction approves in cardcom and get the details//\n//            const approvalNumber = await orderService.getPaymentDetails(lowProfileCode);\n//            console.log('approvalNumber',approvalNumber);\n//             // update my on DB with the transaction details//\n//             // const cardComLink =  await orderService.savePaymentDetails(approvalNumber);\n//             dispatch({\n//                 type: 'SET_PAYMENT_DETAILS',\n//                 approvalNumber\n//             });\n//         } catch (err) {\n//             console.log('Actions: err in set order', err);\n//         }\n//     };\n// }\n\nconst getLowProfileCode = data => {\n  const codeStart = data.indexOf(\"LowProfileCode=\");\n  const lowProfileCodeClean = data.substr(codeStart + 15, data.length - 1);\n  return lowProfileCodeClean;\n};","map":{"version":3,"sources":["/Users/dana/Desktop/TapTouch/Frontend/src/store/action.js"],"names":["orderService","setMediaLink","mediaLink","console","log","dispatch","type","err","setMediaType","mediaName","setOrderDetails","orderDetails","orderCompleted","orderId","saveOrder","cardComLink","charge","lowProfile","getLowProfileCode","updateLowProfile","getOrder","selectedOrder","getOrderById","data","codeStart","indexOf","lowProfileCodeClean","substr","length"],"mappings":"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","sourcesContent":["import {orderService} from '../services/order.service.js';\n    \nexport function setMediaLink(mediaLink) {\n    console.log('action mediaLink', mediaLink);\n    return async dispatch => {\n        try {\n            dispatch({\n                type: 'SET_MEDIA_LINK',\n                mediaLink\n            });\n        } catch (err) {\n            console.log('Name Actions: err in loaded Names', err);\n        }\n    };\n}\nexport function setMediaType(mediaName) {\n    console.log('action mediaName', mediaName);\n    return async dispatch => {\n        try {\n            dispatch({\n                type: 'SELECTED_MEDIA_TYPE',\n                mediaName\n            });\n        } catch (err) {\n            console.log('Order Actions: err in set order', err);\n        }\n    };\n}\nexport function setOrderDetails(orderDetails) {\n    console.log('action orderDetails', orderDetails);\n    return async dispatch => {\n        try {\n            dispatch({\n                type: 'SET_ORDER',\n                orderDetails\n            });\n        } catch (err) {\n            console.log('Actions: err in set order', err);\n        }\n    };\n}\nexport function orderCompleted(orderDetails) {\n    return async dispatch => {\n        try {\n            console.log('orderDetails sfsffsff',orderDetails);\n            const orderId = await orderService.saveOrder(orderDetails);\n            console.log('orderId actionnnnn',orderId);\n\n            const cardComLink =  await orderService.charge('testp',105.2,orderId);\n            const lowProfile = getLowProfileCode(cardComLink);\n            // orderDetails.lowProfileCode = lowProfile\n             console.log('orderDetails sfsffsf222222',orderDetails);\n             orderService.updateLowProfile(orderId, lowProfile)\n            dispatch({\n                type: 'SET_CARDCOME_LINK',\n                cardComLink\n            });\n        } catch (err) {\n            console.log('Actions: err in set order', err);\n        }\n    };\n}\n\nexport function getOrder(orderId) {\n    console.log('action getOrder orderId', orderId);\n    return async dispatch => {\n        try {\n            const selectedOrder = await orderService.getOrderById(orderId)\n            console.log('selectedOrder',selectedOrder);\n            dispatch({\n                type: 'SET_SELECTED_ORDER',\n                selectedOrder\n            });\n        } catch (err) {\n            console.log('Actions: err in set order', err);\n        }\n    }; \n}\n// export function transactionSuccess(lowProfileCode) {\n// console.log('actionnn transactionSuccess');\n//     return async dispatch => {\n\n//         try {\n//             //check if the transaction approves in cardcom and get the details//\n//            const approvalNumber = await orderService.getPaymentDetails(lowProfileCode);\n//            console.log('approvalNumber',approvalNumber);\n\n//             // update my on DB with the transaction details//\n//             // const cardComLink =  await orderService.savePaymentDetails(approvalNumber);\n//             dispatch({\n//                 type: 'SET_PAYMENT_DETAILS',\n//                 approvalNumber\n//             });\n//         } catch (err) {\n//             console.log('Actions: err in set order', err);\n//         }\n//     };\n// }\n\nconst getLowProfileCode = (data) => {\n    const codeStart = data.indexOf(\"LowProfileCode=\");\n    const lowProfileCodeClean = data.substr(codeStart + 15, data.length - 1);\n    return lowProfileCodeClean;\n  };"]},"metadata":{},"sourceType":"module"}